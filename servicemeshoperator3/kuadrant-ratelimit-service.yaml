# Service expected by Kuadrant WasmPlugin (ratelimit-service endpoint).
# Limitador is deployed as limitador-limitador; this service points to the same pods
# so the gateway can reach the rate limit backend. Required for RateLimitPolicy to return 429.
apiVersion: v1
kind: Service
metadata:
  name: kuadrant-ratelimit-service
  namespace: istio-system
  annotations:
    argocd.argoproj.io/sync-wave: "5"
spec:
  ports:
    - name: grpc
      port: 8081
      protocol: TCP
      targetPort: grpc
  selector:
    app: limitador
    limitador-resource: limitador
  type: ClusterIP
