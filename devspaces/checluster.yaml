apiVersion: org.eclipse.che/v2
kind: CheCluster
metadata:
  name: devspaces
  namespace: openshift-devspaces
  labels:
    app.kubernetes.io/instance: devspaces
  annotations:
    argocd.argoproj.io/sync-wave: "7"
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
    argocd.argoproj.io/compare-options: IgnoreExtraneous=true
spec:
  components:
    cheServer:
      debug: false
  devEnvironments:
    defaultNamespace:
      autoProvision: true
      template: "<username>-devspaces"
    defaultComponents:
      - name: universal-developer-image
        container:
          image: registry.redhat.io/devspaces/udi-rhel9:latest
          memoryLimit: "4Gi"
          memoryRequest: "512Mi"
    defaultEditor: che-incubator/che-code/latest
    disableContainerBuildCapabilities: false
    secondsOfInactivityBeforeIdling: 1800
    storage:
      pvcStrategy: per-user
  security:
    containerSecurityContext:
      allowPrivilegeEscalation: true
      capabilities:
        add:
          - SETGID
          - SETUID