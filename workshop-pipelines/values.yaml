# Values file for workshop-pipelines Helm chart version 0.1.6
# Repository: https://maximilianopizarro.github.io/workshop-pipelines/
# Chart: workshop-pipelines
# Version: 0.1.6

# Namespace configuration
namespace: workshop-pipelines  # Replace with your OpenShift namespace (e.g., yourusername-dev)

# Pipeline configuration
pipeline:
  # Source image in OpenShift internal registry
  sourceImage: image-registry.openshift-image-registry.svc:5000/workshop-pipelines/workshop-pipelines:latest
  
  # Target image in external registry (e.g., Quay.io)
  targetImage: quay.io/maximilianopizarro/workshop-pipelines
  
  # Quay.io secret configuration for promote-to-quay task (optional)
  quaySecret:
    # Secret name (must match the pattern: <quay-username>-workshoppipelines-pull-secret)
    name: maximilianopizarro-workshoppipelines-pull-secret
    # Quay.io robot account username (format: username+robotname)
    username: "maximilianopizarro+workshoppipelines"
    # Quay.io robot account password (from robot account creation)
    password: "LOTMJQQCYI42EDUX4U3CDF0332YOOU0VRW6FQWZ2QAPGK78KCIJEIMBQ0TB13BWK"
    # Email for docker registry secret
    email: "maximiliano.pizarro.5@gmail.com"

# Route configuration
route:
  enabled: true
  host: workshop-pipelines-workshop-pipelines.cluster-24p6f.24p6f.sandbox2386.opentlc.com

# PostgreSQL configuration
postgresql:
  # ServiceAccount configuration
  serviceAccount:
    # Create the service account (set to false since we create it via template)
    create: false
    # Name of the service account to use
    name: workshop-pipelines-postgresql
    # Automount API credentials
    automountServiceAccountToken: false
  # Image configuration - Using Red Hat PostgreSQL image
  image:
    registry: registry.redhat.io
    repository: rhel8/postgresql-15
    tag: latest
    pullPolicy: IfNotPresent
  # Security Context configuration - using user 1001 with SCC anyuid
  containerSecurityContext:
    runAsUser: 1001
    runAsGroup: 1001
    allowPrivilegeEscalation: false
    capabilities:
      drop:
        - ALL
  podSecurityContext:
    fsGroup: 1001
    runAsUser: 1001
    runAsGroup: 1001
